if("undefined"!=typeof document){let e=document.createElement("style");e.setAttribute("data-plugin","emils"),e.textContent='/*! tailwindcss v4.1.12 | MIT License | https://tailwindcss.com */\n@layer properties;\n@layer theme, base, components, utilities;\n@layer theme {\n  :root, :host {\n    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",\n      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n      "Courier New", monospace;\n    --color-green-900: oklch(39.3% 0.095 152.535);\n    --color-white: #fff;\n    --spacing: 0.25rem;\n    --container-md: 28rem;\n    --text-xs: 0.75rem;\n    --text-xs--line-height: calc(1 / 0.75);\n    --text-sm: 0.875rem;\n    --text-sm--line-height: calc(1.25 / 0.875);\n    --text-lg: 1.125rem;\n    --text-lg--line-height: calc(1.75 / 1.125);\n    --text-xl: 1.25rem;\n    --text-xl--line-height: calc(1.75 / 1.25);\n    --text-2xl: 1.5rem;\n    --text-2xl--line-height: calc(2 / 1.5);\n    --text-3xl: 1.875rem;\n    --text-3xl--line-height: calc(2.25 / 1.875);\n    --text-4xl: 2.25rem;\n    --text-4xl--line-height: calc(2.5 / 2.25);\n    --text-5xl: 3rem;\n    --text-5xl--line-height: 1;\n    --font-weight-bold: 700;\n    --radius-lg: 0.5rem;\n    --radius-2xl: 1rem;\n    --default-transition-duration: 150ms;\n    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    --default-font-family: var(--font-sans);\n    --default-mono-font-family: var(--font-mono);\n  }\n}\n@layer base {\n  *, ::after, ::before, ::backdrop, ::file-selector-button {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    border: 0 solid;\n  }\n  html, :host {\n    line-height: 1.5;\n    -webkit-text-size-adjust: 100%;\n    tab-size: 4;\n    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");\n    font-feature-settings: var(--default-font-feature-settings, normal);\n    font-variation-settings: var(--default-font-variation-settings, normal);\n    -webkit-tap-highlight-color: transparent;\n  }\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n  abbr:where([title]) {\n    -webkit-text-decoration: underline dotted;\n    text-decoration: underline dotted;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    font-size: inherit;\n    font-weight: inherit;\n  }\n  a {\n    color: inherit;\n    -webkit-text-decoration: inherit;\n    text-decoration: inherit;\n  }\n  b, strong {\n    font-weight: bolder;\n  }\n  code, kbd, samp, pre {\n    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);\n    font-feature-settings: var(--default-mono-font-feature-settings, normal);\n    font-variation-settings: var(--default-mono-font-variation-settings, normal);\n    font-size: 1em;\n  }\n  small {\n    font-size: 80%;\n  }\n  sub, sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n  sub {\n    bottom: -0.25em;\n  }\n  sup {\n    top: -0.5em;\n  }\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n  :-moz-focusring {\n    outline: auto;\n  }\n  progress {\n    vertical-align: baseline;\n  }\n  summary {\n    display: list-item;\n  }\n  ol, ul, menu {\n    list-style: none;\n  }\n  img, svg, video, canvas, audio, iframe, embed, object {\n    display: block;\n    vertical-align: middle;\n  }\n  img, video {\n    max-width: 100%;\n    height: auto;\n  }\n  button, input, select, optgroup, textarea, ::file-selector-button {\n    font: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    border-radius: 0;\n    background-color: transparent;\n    opacity: 1;\n  }\n  :where(select:is([multiple], [size])) optgroup {\n    font-weight: bolder;\n  }\n  :where(select:is([multiple], [size])) optgroup option {\n    padding-inline-start: 20px;\n  }\n  ::file-selector-button {\n    margin-inline-end: 4px;\n  }\n  ::placeholder {\n    opacity: 1;\n  }\n  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {\n    ::placeholder {\n      color: currentcolor;\n      @supports (color: color-mix(in lab, red, red)) {\n        color: color-mix(in oklab, currentcolor 50%, transparent);\n      }\n    }\n  }\n  textarea {\n    resize: vertical;\n  }\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n  ::-webkit-date-and-time-value {\n    min-height: 1lh;\n    text-align: inherit;\n  }\n  ::-webkit-datetime-edit {\n    display: inline-flex;\n  }\n  ::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {\n    padding-block: 0;\n  }\n  ::-webkit-calendar-picker-indicator {\n    line-height: 1;\n  }\n  :-moz-ui-invalid {\n    box-shadow: none;\n  }\n  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {\n    appearance: button;\n  }\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    height: auto;\n  }\n  [hidden]:where(:not([hidden="until-found"])) {\n    display: none !important;\n  }\n}\n@layer utilities {\n  .absolute {\n    position: absolute;\n  }\n  .relative {\n    position: relative;\n  }\n  .z-10 {\n    z-index: 10;\n  }\n  .mx-auto {\n    margin-inline: auto;\n  }\n  .mt-2 {\n    margin-top: calc(var(--spacing) * 2);\n  }\n  .mt-4 {\n    margin-top: calc(var(--spacing) * 4);\n  }\n  .mb-2 {\n    margin-bottom: calc(var(--spacing) * 2);\n  }\n  .mb-4 {\n    margin-bottom: calc(var(--spacing) * 4);\n  }\n  .flex {\n    display: flex;\n  }\n  .hidden {\n    display: none;\n  }\n  .h-full {\n    height: 100%;\n  }\n  .w-full {\n    width: 100%;\n  }\n  .max-w-md {\n    max-width: var(--container-md);\n  }\n  .flex-col {\n    flex-direction: column;\n  }\n  .items-center {\n    align-items: center;\n  }\n  .justify-between {\n    justify-content: space-between;\n  }\n  .justify-center {\n    justify-content: center;\n  }\n  .gap-1 {\n    gap: calc(var(--spacing) * 1);\n  }\n  .gap-2 {\n    gap: calc(var(--spacing) * 2);\n  }\n  .gap-4 {\n    gap: calc(var(--spacing) * 4);\n  }\n  .gap-6 {\n    gap: calc(var(--spacing) * 6);\n  }\n  .gap-8 {\n    gap: calc(var(--spacing) * 8);\n  }\n  .space-y-1 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 1) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-2 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .overflow-hidden {\n    overflow: hidden;\n  }\n  .rounded-2xl {\n    border-radius: var(--radius-2xl);\n  }\n  .rounded-full {\n    border-radius: calc(infinity * 1px);\n  }\n  .rounded-lg {\n    border-radius: var(--radius-lg);\n  }\n  .border-4 {\n    border-style: var(--tw-border-style);\n    border-width: 4px;\n  }\n  .border-green-900 {\n    border-color: var(--color-green-900);\n  }\n  .bg-white\\/20 {\n    background-color: color-mix(in srgb, #fff 20%, transparent);\n    @supports (color: color-mix(in lab, red, red)) {\n      background-color: color-mix(in oklab, var(--color-white) 20%, transparent);\n    }\n  }\n  .p-4 {\n    padding: calc(var(--spacing) * 4);\n  }\n  .p-6 {\n    padding: calc(var(--spacing) * 6);\n  }\n  .p-8 {\n    padding: calc(var(--spacing) * 8);\n  }\n  .px-4 {\n    padding-inline: calc(var(--spacing) * 4);\n  }\n  .px-6 {\n    padding-inline: calc(var(--spacing) * 6);\n  }\n  .px-8 {\n    padding-inline: calc(var(--spacing) * 8);\n  }\n  .py-2 {\n    padding-block: calc(var(--spacing) * 2);\n  }\n  .py-3 {\n    padding-block: calc(var(--spacing) * 3);\n  }\n  .py-4 {\n    padding-block: calc(var(--spacing) * 4);\n  }\n  .text-center {\n    text-align: center;\n  }\n  .text-left {\n    text-align: left;\n  }\n  .text-2xl {\n    font-size: var(--text-2xl);\n    line-height: var(--tw-leading, var(--text-2xl--line-height));\n  }\n  .text-3xl {\n    font-size: var(--text-3xl);\n    line-height: var(--tw-leading, var(--text-3xl--line-height));\n  }\n  .text-4xl {\n    font-size: var(--text-4xl);\n    line-height: var(--tw-leading, var(--text-4xl--line-height));\n  }\n  .text-5xl {\n    font-size: var(--text-5xl);\n    line-height: var(--tw-leading, var(--text-5xl--line-height));\n  }\n  .text-lg {\n    font-size: var(--text-lg);\n    line-height: var(--tw-leading, var(--text-lg--line-height));\n  }\n  .text-sm {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n  .text-xl {\n    font-size: var(--text-xl);\n    line-height: var(--tw-leading, var(--text-xl--line-height));\n  }\n  .text-xs {\n    font-size: var(--text-xs);\n    line-height: var(--tw-leading, var(--text-xs--line-height));\n  }\n  .font-bold {\n    --tw-font-weight: var(--font-weight-bold);\n    font-weight: var(--font-weight-bold);\n  }\n  .text-white {\n    color: var(--color-white);\n  }\n  .text-white\\/70 {\n    color: color-mix(in srgb, #fff 70%, transparent);\n    @supports (color: color-mix(in lab, red, red)) {\n      color: color-mix(in oklab, var(--color-white) 70%, transparent);\n    }\n  }\n  .shadow-2xl {\n    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, rgb(0 0 0 / 0.25));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .transition-colors {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-transform {\n    transition-property: transform, translate, scale, rotate;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .hover\\:scale-105 {\n    &:hover {\n      @media (hover: hover) {\n        --tw-scale-x: 105%;\n        --tw-scale-y: 105%;\n        --tw-scale-z: 105%;\n        scale: var(--tw-scale-x) var(--tw-scale-y);\n      }\n    }\n  }\n  .hover\\:bg-white\\/30 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: color-mix(in srgb, #fff 30%, transparent);\n        @supports (color: color-mix(in lab, red, red)) {\n          background-color: color-mix(in oklab, var(--color-white) 30%, transparent);\n        }\n      }\n    }\n  }\n  .active\\:scale-95 {\n    &:active {\n      --tw-scale-x: 95%;\n      --tw-scale-y: 95%;\n      --tw-scale-z: 95%;\n      scale: var(--tw-scale-x) var(--tw-scale-y);\n    }\n  }\n}\n@property --tw-space-y-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-border-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-font-weight {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-inset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: "<length>";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: "*";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-scale-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@layer properties {\n  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {\n    *, ::before, ::after, ::backdrop {\n      --tw-space-y-reverse: 0;\n      --tw-border-style: solid;\n      --tw-font-weight: initial;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n      --tw-scale-x: 1;\n      --tw-scale-y: 1;\n      --tw-scale-z: 1;\n    }\n  }\n}\n',document.head.appendChild(e)}var e={};e.d=(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{Z:()=>G});let n=window.WebArcadeAPI,i=window.SolidJSWeb,a=window.SolidJS;var r=(0,i.template)('<div style=image-rendering:pixelated><svg viewBox="0 0 16 16"class="w-full h-full"><rect x=2 y=6 width=12 height=8 fill=#00d4ff></rect><rect x=1 y=8 width=1 height=4 fill=#00d4ff></rect><rect x=14 y=8 width=1 height=4 fill=#00d4ff></rect><rect x=3 y=5 width=10 height=1 fill=#00d4ff></rect><rect x=4 y=4 width=8 height=1 fill=#00d4ff></rect><rect x=3 y=6 width=10 height=2 fill=#66e5ff></rect><rect x=5 y=9 width=2 height=3 fill=#fff></rect><rect x=9 y=9 width=2 height=3 fill=#fff>'),l=(0,i.template)('<div style=image-rendering:pixelated><svg viewBox="0 0 16 16"class="w-full h-full"><rect x=4 y=2 width=8 height=3 fill=#2d8a2d></rect><rect x=3 y=5 width=10 height=3 fill=#2d8a2d></rect><rect x=2 y=8 width=12 height=4 fill=#2d8a2d></rect><rect x=3 y=12 width=10 height=2 fill=#2d8a2d></rect><rect x=5 y=3 width=6 height=2 fill=#3da83d></rect><rect x=4 y=6 width=8 height=2 fill=#3da83d></rect><rect x=3 y=9 width=10 height=2 fill=#3da83d>'),o=(0,i.template)('<div style=image-rendering:pixelated><svg viewBox="0 0 16 16"class="w-full h-full"><rect x=4 y=2 width=8 height=3 fill=#2d8a2d></rect><rect x=3 y=5 width=10 height=3 fill=#2d8a2d></rect><rect x=2 y=8 width=12 height=4 fill=#2d8a2d></rect><rect x=3 y=12 width=10 height=2 fill=#2d8a2d></rect><rect x=4 y=6 width=3 height=2 fill=#ff3333></rect><rect x=9 y=6 width=3 height=2 fill=#ff3333></rect><rect x=5 y=10 width=6 height=1 fill=#ff3333>'),s=(0,i.template)('<div style=image-rendering:pixelated><svg viewBox="0 0 16 20"class="w-full h-full"><ellipse cx=8 cy=10 rx=6 ry=8 fill=#9966ff></ellipse><ellipse cx=8 cy=10 rx=4 ry=6 fill=#cc99ff></ellipse><ellipse cx=8 cy=10 rx=2 ry=3 fill=#eeddff>'),c=(0,i.template)("<div class=relative style=background-color:#2d5a27>"),d=(0,i.template)('<span class="font-bold text-xl"style="text-shadow:1px 1px 2px rgba(0,0,0,0.5)">'),p=(0,i.template)('<div class="absolute flex items-center justify-center">'),h=(0,i.template)('<div class="flex flex-col items-center gap-6 p-8"><div class="text-center mb-4"><h1 class="text-5xl font-bold text-white mb-2"style="text-shadow:3px 3px 0 #1a3a17">EMILS</h1><p class="text-white/70 text-sm">A Minesweeper-like Adventure</p></div><div class="flex flex-col gap-4"><button class="px-8 py-4 text-xl font-bold text-white rounded-lg transition-transform hover:scale-105 active:scale-95"style="background-color:#4a9c3d;box-shadow:0 4px 0 #2d5a27">PLAY</button><button class="px-8 py-4 text-xl font-bold text-white rounded-lg transition-transform hover:scale-105 active:scale-95"style="background-color:#4a9c3d;box-shadow:0 4px 0 #2d5a27">HELP</button><button class="px-8 py-4 text-xl font-bold text-white rounded-lg transition-transform hover:scale-105 active:scale-95"style="background-color:#e91e63;box-shadow:0 4px 0 #ad1457">EXIT'),f=(0,i.template)('<div class="flex flex-col items-center gap-4 p-6 rounded-2xl max-w-md"style=background-color:#f5c842><h2 class="text-2xl font-bold mb-2">GUIDES</h2><div class="text-left space-y-2 text-sm"><p>1. Use Arrow Keys or WASD to move.</p><p>2. Walk into trees to collect them.</p><p>3. Numbers show nearby hidden Treants.</p><p>4. Use trees to defeat Treants safely.</p><p>5. Reach the Portal to win!</p><p>6. Hit a Treant without trees = Game Over!</p></div><div class="flex gap-6 mt-4"><div class="flex flex-col items-center gap-1"><span class=text-xs>Tree</span></div><div class="flex flex-col items-center gap-1"><span class=text-xs>Treant</span></div><div class="flex flex-col items-center gap-1"><span class=text-xs>Portal</span></div></div><button class="mt-4 px-6 py-3 rounded-lg font-bold text-white"style=background-color:#e91e63>BACK'),u=(0,i.template)('<div class="flex flex-col items-center gap-4"><div class="flex justify-between w-full px-4 mb-2 gap-8"><div class="flex items-center gap-2 bg-white/20 rounded-full px-4 py-2"><span class="text-white font-bold text-lg">x </span></div><div class="flex items-center gap-2 bg-white/20 rounded-full px-4 py-2"><span class="text-white font-bold text-lg">x </span></div></div><div class="border-4 border-green-900 rounded-lg overflow-hidden shadow-2xl"></div><div class="text-white/70 text-sm mt-2">Use Arrow Keys or WASD to move</div><button class="mt-2 px-4 py-2 bg-white/20 rounded-lg text-white hover:bg-white/30 transition-colors">Menu'),x=(0,i.template)('<div class="flex flex-col items-center gap-6 p-8 rounded-2xl"style=background-color:#f5c842><h2 class="text-3xl font-bold">YOU WIN!</h2><p class=text-4xl>:)</p><div class="text-sm space-y-1"><p>Trees Collected: </p><p>Treants Defeated: </p></div><div class="flex gap-4"><button class="px-6 py-3 rounded-lg font-bold text-white"style=background-color:#e91e63>HOME</button><button class="px-6 py-3 rounded-lg font-bold text-white"style=background-color:#e91e63>RETRY'),g=(0,i.template)('<div class="flex flex-col items-center gap-6 p-8 rounded-2xl"style=background-color:#f5c842><h2 class="text-3xl font-bold">YOU LOSE!</h2><p class=text-4xl>:(</p><div class="flex gap-4"><button class="px-6 py-3 rounded-lg font-bold text-white"style=background-color:#e91e63>HOME</button><button class="px-6 py-3 rounded-lg font-bold text-white"style=background-color:#e91e63>RETRY'),w=(0,i.template)('<div class="w-full h-full flex flex-col items-center justify-center"style=background-color:#2d5a27>');let m=new class{constructor(){this.audioContext=null,this.musicGain=null,this.sfxGain=null,this.musicPlaying=!1,this.musicOscillators=[]}init(){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.musicGain=this.audioContext.createGain(),this.musicGain.gain.value=.15,this.musicGain.connect(this.audioContext.destination),this.sfxGain=this.audioContext.createGain(),this.sfxGain.gain.value=.3,this.sfxGain.connect(this.audioContext.destination))}playTone(e,t,n="sine",i=null){this.audioContext||this.init();let a=this.audioContext.createOscillator(),r=this.audioContext.createGain();return a.type=n,a.frequency.value=e,r.gain.setValueAtTime(.3,this.audioContext.currentTime),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),a.connect(r),r.connect(i||this.sfxGain),a.start(),a.stop(this.audioContext.currentTime+t),a}playMove(){this.playTone(440,.1,"square")}playCollectTree(){this.playTone(523,.1,"sine"),setTimeout(()=>this.playTone(659,.1,"sine"),50),setTimeout(()=>this.playTone(784,.15,"sine"),100)}playDefeatTreant(){this.playTone(330,.15,"sawtooth"),setTimeout(()=>this.playTone(220,.2,"sawtooth"),100)}playWin(){[523,659,784,1047].forEach((e,t)=>{setTimeout(()=>this.playTone(e,.3,"sine"),150*t)})}playLose(){this.playTone(294,.3,"sawtooth"),setTimeout(()=>this.playTone(262,.3,"sawtooth"),200),setTimeout(()=>this.playTone(220,.5,"sawtooth"),400)}playPortal(){for(let e=0;e<5;e++)setTimeout(()=>{this.playTone(400+100*e,.2,"sine")},80*e)}playClick(){this.playTone(600,.08,"square")}startMusic(){this.audioContext||this.init(),this.musicPlaying||(this.musicPlaying=!0,this.playMusicLoop())}playMusicLoop(){if(!this.musicPlaying)return;let e=0;[{freq:262,dur:.4},{freq:294,dur:.4},{freq:330,dur:.4},{freq:294,dur:.4},{freq:262,dur:.4},{freq:247,dur:.4},{freq:262,dur:.8},{freq:0,dur:.4}].forEach(t=>{t.freq>0&&setTimeout(()=>{if(this.musicPlaying){let e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.type="triangle",e.frequency.value=t.freq,n.gain.setValueAtTime(.2,this.audioContext.currentTime),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.9*t.dur),e.connect(n),n.connect(this.musicGain),e.start(),e.stop(this.audioContext.currentTime+t.dur)}},1e3*e),e+=t.dur}),setTimeout(()=>{this.musicPlaying&&this.playMusicLoop()},1e3*e)}stopMusic(){this.musicPlaying=!1}setMusicVolume(e){this.musicGain&&(this.musicGain.gain.value=e)}setSfxVolume(e){this.sfxGain&&(this.sfxGain.gain.value=e)}},y="menu",v="playing",b="guide",C="lose",k="empty",S="tree",T="treant",z="portal";function M(e){var t;return t=r(),(0,i.effect)(n=>{var a=`relative ${e.class||""}`,r=e.size||"32px",l=e.size||"32px";return a!==n.e&&(0,i.className)(t,n.e=a),r!==n.t&&(0,i.setStyleProperty)(t,"width",n.t=r),l!==n.a&&(0,i.setStyleProperty)(t,"height",n.a=l),n},{e:void 0,t:void 0,a:void 0}),t}function A(e){var t;return t=l(),(0,i.effect)(n=>{var a=e.class||"",r=e.size||"32px",l=e.size||"32px";return a!==n.e&&(0,i.className)(t,n.e=a),r!==n.t&&(0,i.setStyleProperty)(t,"width",n.t=r),l!==n.a&&(0,i.setStyleProperty)(t,"height",n.a=l),n},{e:void 0,t:void 0,a:void 0}),t}function P(e){var t;return t=o(),(0,i.effect)(n=>{var a=e.class||"",r=e.size||"32px",l=e.size||"32px";return a!==n.e&&(0,i.className)(t,n.e=a),r!==n.t&&(0,i.setStyleProperty)(t,"width",n.t=r),l!==n.a&&(0,i.setStyleProperty)(t,"height",n.a=l),n},{e:void 0,t:void 0,a:void 0}),t}function E(e){var t;return t=s(),(0,i.effect)(n=>{var a=e.class||"",r=e.size||"32px",l=e.size||"40px";return a!==n.e&&(0,i.className)(t,n.e=a),r!==n.t&&(0,i.setStyleProperty)(t,"width",n.t=r),l!==n.a&&(0,i.setStyleProperty)(t,"height",n.a=l),n},{e:void 0,t:void 0,a:void 0}),t}function j(e){var t;let[n,r]=(0,a.createSignal)(y),[l,o]=(0,a.createSignal)([]),[s,j]=(0,a.createSignal)({row:9,col:Math.floor(4)}),[G,$]=(0,a.createSignal)(0),[L,q]=(0,a.createSignal)(0),D=()=>{m.playClick(),e.api&&"function"==typeof e.api.exit&&e.api.exit()},F=()=>{let e=function(){let e=Array(10).fill(null).map(()=>Array(8).fill(null).map(()=>({type:S,revealed:!1,adjacentTreants:0}))),t=Math.floor(4);e[0][t].type=z;let n=0;for(;n<8;){let t=Math.floor(8*Math.random())+1,i=Math.floor(8*Math.random());e[t][i].type===S&&(e[t][i].type=T,n++)}for(let t=0;t<10;t++)for(let n=0;n<8;n++)if(e[t][n].type!==T){let i=0;for(let a=-1;a<=1;a++)for(let r=-1;r<=1;r++){if(0===a&&0===r)continue;let l=t+a,o=n+r;l>=0&&l<10&&o>=0&&o<8&&e[l][o].type===T&&i++}e[t][n].adjacentTreants=i}return e}(),t=Math.floor(4);e[9][t].revealed=!0,e[9][t].type=k,o(e),j({row:9,col:t}),$(0),q(0),r(v),m.startMusic()},O=(e,t)=>{if(n()!==v)return;let i=s(),a=i.row+e,c=i.col+t;if(a<0||a>=10||c<0||c>=8)return;let d=[...l().map(e=>[...e.map(e=>({...e}))])],p=d[a][c];if(p.type===T)if(G()>0)$(e=>e-1),q(e=>e+1),p.type=k,p.revealed=!0,m.playDefeatTreant();else{p.revealed=!0,o(d),r(C),m.stopMusic(),m.playLose();return}else if(p.type===S)$(e=>e+1),p.type=k,p.revealed=!0,m.playCollectTree();else if(p.type===z){p.revealed=!0,o(d),j({row:a,col:c}),r("win"),m.stopMusic(),m.playWin();return}else p.revealed=!0,m.playMove();o(d),j({row:a,col:c})},U=e=>{if(n()===v)switch(e.key){case"ArrowUp":case"w":case"W":e.preventDefault(),O(-1,0);break;case"ArrowDown":case"s":case"S":e.preventDefault(),O(1,0);break;case"ArrowLeft":case"a":case"A":e.preventDefault(),O(0,-1);break;case"ArrowRight":case"d":case"D":e.preventDefault(),O(0,1)}};(0,a.onMount)(()=>{window.addEventListener("keydown",U)}),(0,a.onCleanup)(()=>{window.removeEventListener("keydown",U),m.stopMusic()});let I=()=>{var e;let t=l(),n=s();return e=c(),(0,i.setStyleProperty)(e,"width","320px"),(0,i.setStyleProperty)(e,"height","400px"),(0,i.insert)(e,(0,i.createComponent)(a.For,{each:t,children:(e,t)=>(0,i.createComponent)(a.For,{each:e,children:(e,r)=>{var l;let o=n.row===t()&&n.col===r();return l=p(),(0,i.setStyleProperty)(l,"width","40px"),(0,i.setStyleProperty)(l,"height","40px"),(0,i.insert)(l,(0,i.createComponent)(a.Show,{get when(){return!e.revealed},get children(){return(0,i.createComponent)(A,{size:"32px"})}}),null),(0,i.insert)(l,(0,i.createComponent)(a.Show,{get when(){return(0,i.memo)(()=>!!e.revealed)()&&e.type===z},get children(){return(0,i.createComponent)(E,{size:"32px"})}}),null),(0,i.insert)(l,(0,i.createComponent)(a.Show,{get when(){return(0,i.memo)(()=>!!e.revealed)()&&e.type===T},get children(){return(0,i.createComponent)(P,{size:"32px"})}}),null),(0,i.insert)(l,(0,i.createComponent)(a.Show,{get when(){return e.revealed&&e.type===k&&e.adjacentTreants>0&&!o},get children(){var s=d();return(0,i.insert)(s,()=>e.adjacentTreants),(0,i.effect)(t=>(0,i.setStyleProperty)(s,"color",{1:"#4CAF50",2:"#FFC107",3:"#FF9800",4:"#F44336",5:"#9C27B0",6:"#00BCD4",7:"#795548",8:"#607D8B"}[e.adjacentTreants]||"#FFC107")),s}}),null),(0,i.insert)(l,(0,i.createComponent)(a.Show,{when:o,get children(){return(0,i.createComponent)(M,{size:"32px",class:"z-10"})}}),null),(0,i.effect)(e=>{var n=`${40*r()}px`,a=`${40*t()}px`;return n!==e.e&&(0,i.setStyleProperty)(l,"left",e.e=n),a!==e.t&&(0,i.setStyleProperty)(l,"top",e.t=a),e},{e:void 0,t:void 0}),l}})})),e};return t=w(),(0,i.insert)(t,(0,i.createComponent)(a.Show,{get when(){return n()===y},get children(){var N=h(),R=N.firstChild,W=R.firstChild,B=R.nextSibling.firstChild,V=B.nextSibling,H=V.nextSibling;return(0,i.insert)(R,(0,i.createComponent)(M,{size:"128px",class:"mx-auto mb-4"}),W),B.$$click=()=>{m.playClick(),F()},V.$$click=()=>{m.playClick(),r(b)},H.$$click=D,N}}),null),(0,i.insert)(t,(0,i.createComponent)(a.Show,{get when(){return n()===b},get children(){var Y=f(),_=Y.firstChild.nextSibling.nextSibling,K=_.firstChild,J=K.firstChild,Z=K.nextSibling,X=Z.firstChild,Q=Z.nextSibling,ee=Q.firstChild,et=_.nextSibling;return(0,i.insert)(K,(0,i.createComponent)(A,{size:"40px"}),J),(0,i.insert)(Z,(0,i.createComponent)(P,{size:"40px"}),X),(0,i.insert)(Q,(0,i.createComponent)(E,{size:"40px"}),ee),et.$$click=()=>{m.playClick(),r(y)},Y}}),null),(0,i.insert)(t,(0,i.createComponent)(a.Show,{get when(){return n()===v},get children(){var en=u(),ei=en.firstChild,ea=ei.firstChild,er=ea.firstChild,el=(er.firstChild,ea.nextSibling),eo=el.firstChild,es=(eo.firstChild,ei.nextSibling),ec=es.nextSibling.nextSibling;return(0,i.insert)(ea,(0,i.createComponent)(A,{size:"24px"}),er),(0,i.insert)(er,G,null),(0,i.insert)(el,(0,i.createComponent)(P,{size:"24px"}),eo),(0,i.insert)(eo,L,null),(0,i.insert)(es,I),ec.$$click=()=>{m.playClick(),m.stopMusic(),r(y)},en}}),null),(0,i.insert)(t,(0,i.createComponent)(a.Show,{get when(){return"win"===n()},get children(){var ed=x(),ep=ed.firstChild.nextSibling.nextSibling,eh=ep.firstChild,ef=(eh.firstChild,eh.nextSibling),eu=(ef.firstChild,ep.nextSibling).firstChild,ex=eu.nextSibling;return(0,i.insert)(ed,(0,i.createComponent)(M,{size:"64px"}),ep),(0,i.insert)(eh,G,null),(0,i.insert)(ef,L,null),eu.$$click=()=>{m.playClick(),r(y)},ex.$$click=()=>{m.playClick(),F()},ed}}),null),(0,i.insert)(t,(0,i.createComponent)(a.Show,{get when(){return n()===C},get children(){var eg=g(),ew=eg.firstChild.nextSibling.nextSibling,em=ew.firstChild,ey=em.nextSibling;return(0,i.insert)(eg,(0,i.createComponent)(P,{size:"64px"}),ew),em.$$click=()=>{m.playClick(),r(y)},ey.$$click=()=>{m.playClick(),F()},eg}}),null),t}(0,i.delegateEvents)(["click"]);let G=(0,n.createPlugin)({id:"emils",name:"Emils",version:"1.0.0",description:"A minesweeper-like puzzle game where you help Emils reach the portal while avoiding Treants!",author:"WebArcade Team",async onStart(e){console.log("[Emils] Starting..."),e.viewport("emils-viewport",{label:"Emils",component:j,description:"Help Emils navigate the forest and reach the portal!",onActivate:e=>{e.hideAll(),e.fullscreen(!0)}}),e.menu("emils-menu",{label:"Emils",order:100,submenu:[{label:"Play Emils",onClick:()=>e.open("emils-viewport")}]}),e.open("emils-viewport"),e.hideAll(),e.fullscreen(!0),console.log("[Emils] Game loaded successfully")},async onStop(){console.log("[Emils] Stopping...")}});var $=t.Z;export{$ as default};